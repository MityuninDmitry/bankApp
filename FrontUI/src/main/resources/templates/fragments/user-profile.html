<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- Блок с информацией о пользователе -->
<div th:fragment="userProfile(userDto)" th:if="${userDto != null}" style="border: 1px solid black; padding: 10px; margin: 10px 0;">
  <h3>User Profile</h3>
  <p>
    <strong>Login:</strong>
    <span th:text="${userDto.login}"></span>
  <form th:action="@{/delete}" method="post" style="display: inline;">
    <button type="submit" style="margin-left: 10px; color: white; background-color: #f44336; border: none; padding: 2px 5px; border-radius: 3px; cursor: pointer;">
      Delete Account
    </button>
  </form>
  </p>
  <p><strong>First Name:</strong> <span th:text="${userDto.firstName} ?: 'Not specified'"></span></p>
  <p><strong>Last Name:</strong> <span th:text="${userDto.lastName} ?: 'Not specified'"></span></p>
  <p><strong>Email:</strong> <span th:text="${userDto.email} ?: 'Not specified'"></span></p>
  <p><strong>Birth Date:</strong>
    <span th:if="${userDto.birthDate != null}" th:text="${#temporals.format(userDto.birthDate, 'dd.MM.yyyy')}"></span>
    <span th:unless="${userDto.birthDate != null}">Not specified</span>
  </p>

  <!-- Форма для изменения пароля -->
  <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px;">
    <h4>Change Password</h4>
    <form th:action="@{/update/password}" method="post">
      <input type="hidden" name="login" th:value="${userDto.login}">
      <div style="margin-bottom: 10px;">
        <label for="password">New Password:</label>
        <input type="password" id="password" name="password" required style="padding: 5px; width: 200px;">
      </div>
      <button type="submit" style="color: white; background-color: #4CAF50; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">
        Update Password
      </button>
      <span th:if="${passwordUpdated}" style="color: green; margin-left: 10px;">Password updated successfully!</span>
      <span th:if="${passwordError}" style="color: red; margin-left: 10px;" th:text="${passwordError}"></span>
    </form>
  </div>
</div>

<div th:fragment="notAuthenticated" th:if="${userDto == null}">
  <p>Please <a href="/login">log in</a> to view your profile.</p>
</div>
</body>
</html>